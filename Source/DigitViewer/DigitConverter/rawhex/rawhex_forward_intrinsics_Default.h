/* rawhex_forward_intrinsics_Default.h
 * 
 * Author           : Alexander J. Yee
 * Date Created     : 04/04/2012
 * Last Modified    : 01/24/2016
 * 
 */

#ifndef ydv_DigitViewer_rawhex_forward_intrinsics_Default_H
#define ydv_DigitViewer_rawhex_forward_intrinsics_Default_H
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
#include "PublicLibs/CompilerSettings.h"
#include "PublicLibs/Types.h"
namespace DigitViewer{
namespace rawhex{
    using namespace ymp;
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
YM_FORCE_INLINE void convert_hex1_forward_Default(char str[1]){
    char a0 = str[0];
    a0 = a0 > 9 ? a0 + 39 : a0;
    a0 += '0';
    str[0] = a0;
}
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
YM_FORCE_INLINE void convert_hex4_forward_Default32(char str[4]){
    u32_t* T = (u32_t*)str;

    register u32_t a0, b0;

    a0 = T[0];

    b0 = a0 + 0x76767676ull;

    b0 &= 0x80808080ull;

    b0 >>= 7;

    b0 *= 39;

    a0 += 0x30303030ull;

    a0 += b0;

    T[0] = a0;
}
YM_FORCE_INLINE void convert_hex8_forward_Default32(char str[8]){
    u32_t* T = (u32_t*)str;

    register u32_t a0, b0;
    register u32_t a1, b1;

    a0 = T[0];
    a1 = T[1];

    b0 = a0 + 0x76767676ull;
    b1 = a1 + 0x76767676ull;

    b0 &= 0x80808080ull;
    b1 &= 0x80808080ull;

    b0 >>= 7;
    b1 >>= 7;

    b0 *= 39;
    b1 *= 39;

    a0 += 0x30303030ull;
    a1 += 0x30303030ull;

    a0 += b0;
    a1 += b1;

    T[0] = a0;
    T[1] = a1;
}
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
}
}
#endif
