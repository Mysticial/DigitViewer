/* rawhex_forward_convert_AVX2.ipp
 * 
 * Author           : Alexander J. Yee
 * Date Created     : 04/06/2012
 * Last Modified    : 01/24/2016
 * 
 */

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
#include "rawhex_forward_intrinsics_Default.h"
#include "rawhex_forward_intrinsics_SSE2.h"
#include "rawhex_forward_intrinsics_AVX2.h"
#include "rawhex.h"
namespace DigitViewer{
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
void raw_to_hex(char* T, upL_t L){
    char* stop = T + L;

    //  Iterate until T is aligned.
    while  (T < stop && ((upL_t)T & 31)){
        rawhex::convert_hex1_forward_Default(T);
        T += 1;
    }

    while (T < stop - 127){
        rawhex::convert_hex128_forward_AVX2(T);
        T += 128;
    }
    //while (T < stop - 63){
    //    rawhex::convert_hex64_forward_SSE2(T);
    //    T += 64;
    //}
    while (T < stop - 31){
        rawhex::convert_hex32_forward_AVX2(T);
        T += 32;
    }
    while (T < stop - 15){
        rawhex::convert_hex16_forward_SSE2(T);
        T += 16;
    }
    //while (T < stop - 7){
    //    rawhex::convert_hex8_forward_Default32(T);
    //    T += 8;
    //}
    while (T < stop - 3){
        rawhex::convert_hex4_forward_Default32(T);
        T += 4;
    }
    while (T < stop){
        rawhex::convert_hex1_forward_Default(T);
        T += 1;
    }
}
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
}
