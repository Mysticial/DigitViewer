/* Unpack_x86_SSE.h
 * 
 * Author           : Alexander J. Yee
 * Date Created     : 08/30/2015
 * Last Modified    : 08/30/2015
 * 
 */

#pragma once
#ifndef ymp_Unpack_x86_SSE_H
#define ymp_Unpack_x86_SSE_H
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
#include <xmmintrin.h>
#include "PublicLibs/CompilerSettings.h"
namespace ymp{
namespace SIMD{
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
template <int width> YM_FORCE_INLINE __m128 unpacklo_f32_SSE(__m128 a, __m128 b);
template <int width> YM_FORCE_INLINE __m128 unpackhi_f32_SSE(__m128 a, __m128 b);
////////////////////////////////////////////////////////////////////////////////
template <> YM_FORCE_INLINE __m128 unpacklo_f32_SSE<1>(__m128 a, __m128 b){
    a = _mm_shuffle_ps(a, b, 136);
    return _mm_shuffle_ps(a, a, 216);
}
template <> YM_FORCE_INLINE __m128 unpackhi_f32_SSE<1>(__m128 a, __m128 b){
    a = _mm_shuffle_ps(a, b, 221);
    return _mm_shuffle_ps(a, a, 216);
}
////////////////////////////////////////////////////////////////////////////////

//  <2> not implemented yet

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
}
}
#endif
