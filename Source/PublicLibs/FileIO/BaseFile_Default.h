/* BaseFile_Default.h
 * 
 * Author           : Alexander J. Yee
 * Date Created     : 12/30/2015
 * Last Modified    : 12/30/2015
 * 
 */

#pragma once
#ifndef _ymp_FileIO_BaseFile_Default_H
#define _ymp_FileIO_BaseFile_Default_H
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
//  Dependencies
#include <stdio.h>
#include <string>
#include "PublicLibs/Types.h"
namespace ymp{
namespace FileIO{
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
class BaseFile{
    std::string path;
    FILE* filehandle;

public:
    BaseFile(const BaseFile&) = delete;
    void operator=(const BaseFile&) = delete;
    BaseFile(BaseFile&& x)
        : path(std::move(x.path))
        , filehandle(std::move(x.filehandle))
    {
        x.path.clear();
    }
    void operator=(BaseFile&& x){
        path = std::move(x.path);
        filehandle = std::move(x.filehandle);
        x.path.clear();
    }

public:
    BaseFile(){};
    virtual ~BaseFile(){ close(); }

    bool is_open() const{
        return !path.empty();
    }
    const std::string& GetPath() const{
        return path;
    }

public:
    bool open(std::string path);
    bool create(std::string path, ufL_t bytes = 0);
    void close(bool delete_file = false);

public:
    bool set_ptr(ufL_t offset);
    void flush();
    upL_t read(void* T, upL_t bytes);
    upL_t write(const void* T, upL_t bytes);
};
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
}
}
#endif
